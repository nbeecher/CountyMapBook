<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>TxDOT POD</title>

  <!-- ArcGIS JS 4 -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.8/esri/css/main.css">
  <link rel ="stylesheet" href="css/style.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

</head>

<body>
<button type="button" id="extent" class="btn btn-default btn-block" data-toggle="tooltip" title="Default map view"></button>

  <nav class="navbar-primary">
    <div id="header">
      <div class="btn-expand-collapse" id="banner"><span class="glyphicon glyphicon-menu-left" id="slidebtn"></span></div>       
      <div class= "nav-label" id="headerTitle">Print on Demand</div>
     </div> 
    <div id="searchIcon">
      <a href="#"><span class="esri-icon esri-icon-search"></span></a>
    </div>
    <div id="search">      
      <span class="search-label" id="searchWidgetDiv"></span>
    </div>
     
    <ul class="navbar-primary-menu">
      <li>
        <a role="menuitem" tabindex="0" href='#' data-target="#test" data-toggle="collapse" aria-expanded="false" aria-controls="test" id="overlays"><span class="esri-icon esri-icon-layers"></span><span class="nav-label">Overlays</span><span id="overlaysDown" class="glyphicon glyphicon-menu-down"></span></a>
      </li> 
      <div class="collapse" id="test">
        <div id="layerListDiv" class="nav-label">  
          <section class="evacRouteContainer">
            <div class="checkboxEvacRoute" id="evacRoute">
                <div class="evacMiddle" id="evacClick">
                  <i class="fa fa-toggle-on fa-2x activeEvac" id="onEvac" style="display:none;"></i>
                  <i class="fa fa-toggle-on fa-2x fa-rotate-180 inactiveEvac" id="offEvac" ></i>                  
                </div>             
                <span id="evacLabel">Evacuation Route</span>
            </div> 
            <div class="evacRouteLegendBtn">
              <button class="glyphicon glyphicon-menu-down" type="button" data-toggle="collapse" data-target="#evacRouteLegend" aria-expanded="false" aria-controls="evacRouteLegend" title="Legend" id="erBtn">
              </button> 
            </div> 
          </section> 
          
            <div class="collapse" id="evacRouteLegend">
              <div id="legendEvacRouteDiv"></div>        
            </div>  

            <br>
            <section class="funcClassContainer">
              <div class="checkboxFuncClass" id="funcClass">  
                <div class="funMiddle" id="funClick">
                  <i class="fa fa-toggle-on fa-2x activeFun" id="onFun" style="display:none;"></i>
                  <i class="fa fa-toggle-on fa-2x fa-rotate-180 inactiveFun" id="offFun" ></i>                  
                </div>             
                <span id="funLabel">Functional Classification </span>
              </div>
              <div class="funcClassLengendBtn">
                <button class="glyphicon glyphicon-menu-down" type="button" data-toggle="collapse" data-target="#funcClassLegend" aria-expanded="false" aria-controls="funcClassLegend" title="Legend" id="fcBtn">
                </button> 
              </div>
            </section>   
            <div class="collapse" id="funcClassLegend">
              <div id="legendFuncClassDiv"></div>        
            </div> 
            <br>    
            <section class="lowWaterContainer">
              <div class="checkboxLowWater" id="lowWater">
                <div class="middle">                
                  <i class="fa fa-toggle-on fa-2x active" id="onLow" style="display:none;"></i>
                  <i class="fa fa-toggle-on fa-2x fa-rotate-180 inactive" id="offLow" ></i>                  
                </div> 
                <span id="lowLabel">Low Water Crossing</span>
              </div>  
              <div class="lowWaterLengendBtn">
                <button class="glyphicon glyphicon-menu-down" id="lwBtn" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" title="Legend">   
                </button>  
              </div>                
            </section>
            <div class="collapse" id="collapseExample">
              <div id="legendLowWaterDiv"></div>        
            </div>            
        </div> 

      </div> 
      <li>
        <a role="menuitem" tabindex="0" href='#' data-target="#basemapDiv" data-toggle="collapse" aria-expanded="false" aria-controls="basemapDiv" id="basemaps"><span class="esri-icon esri-icon-basemap"></span><span class="nav-label">Basemaps</span><span id="basemapDown" class="glyphicon glyphicon-menu-down"></span></a>
      </li>
      <div class="collapse" id="basemapDiv">       
        <div id="txdotDiv" class="sub-label">TxDOT Basemap</div>
        <div id="esriLightGray" class="sub-label">Esri Light Gray</div>
        <div id="googleDiv" class="sub-label">Texas Imagery Service</div>
        <div id="streetsDiv" class="sub-label">Esri Streets</div>
        <div id="osm" class="sub-label">Open Street Map</div>             
      </div>
      <li> 
        <a role="menuitem" tabindex="0" href='#' data-target="#printChoice" data-toggle="collapse" aria-expanded="false" aria-controls="printChoice" id="print"><span class="esri-icon esri-icon-printer"></span><span class="nav-label">Print</span><span id="printDown" class="glyphicon glyphicon-menu-down"></span></a>
      </li> 
        <div class="collapse" id="printChoice">
          <div id="printSingleDiv" class="nav-label">Print Current Extent Map  
          </div>  
       
          <div id="printCountyDiv" class="nav-label"> 
            <div class="nav-label" id="counties">              
              <input type="text" id="county" list="countyList" placeholder="Print County Mapbook">
              <datalist id="countyList">
              </datalist>
              <a href="#" data-toggle="tooltip" title="Download County">
              <button type="button" id="countyButton" class="fas fa-download"></button></a>
            </div>
          </div>
        </div>
      <li>
        <a id="about"><span class="esri-icon esri-icon-question"></span><span class="nav-label">About</span></a>
      </li>
      <div id="myModal" class="modal">        
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>Print on Demand is a Texas Department of Transportation web map application where users can download and print a single map or an entire county of maps.
          This application is meant to replace the hardcopy County Road Mapbook from previous years, and supplement the Map Grid Search web page.</p>
        </div>
      </div>
      <li> 
        <a href="#" data-target="#links" data-toggle="collapse" aria-expanded="false" aria-controls="links" id="link"><span class="esri-icon esri-icon-link"></span><span class="nav-label">TxDOT Links</span><span id="linksDown" class="glyphicon glyphicon-menu-down"></span></a>       
      </li>      
      <div class="collapse" id="links">                     
        <div id="projectTrackerDiv" class="nav-label" onclick="window.open('http://apps.dot.state.tx.us/apps-cq/project_tracker/');">          
          <span class="links-label" id="trackerLabel">Project Tracker</span>
        </div>      
        <div id="driveTexasDiv" class="nav-label" onclick="window.open('https://drivetexas.org/');">
          <span class="links-label">Drive Texas</span>
        </div>                                
          <div id="spmDiv" class="nav-label" onclick="window.open('https://www.txdot.gov/apps/statewide_mapping/StatewidePlanningMap.html');">            
            <span class="links-label">Statewide Planning Map</span>  
        </div>
        <div id="gridSearchDiv" class="nav-label" onclick="window.open('https://www.dot.state.tx.us/apps-cg/grid_search/county_grid_search.htm');">            
            <span class="links-label">Map Grid Search</span>  
        </div>
      </div>
    </ul>   
  </nav>
  <div id="mapViewDiv"></div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.js" integrity="sha256-fNXJFIlca05BIO2Y5zh1xrShK3ME+/lYZ0j+ChxX2DA=" crossorigin="anonymous"></script>   

    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>  

     <!-- Enable WebGL Rendering-->
    <script>
        var dojoConfig = {
            has: {"esri-featurelayer-webgl": 1}
        };

    </script>

    <script src="https://js.arcgis.com/4.8/"></script>

    <!-- read Counties.txt file to populate print by county drop down-->
    <script type="text/javascript">

        var textByLine;

        function readTextFile(file)
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                        var allText = rawFile.responseText;
                        //fileDisplayArea.innerText = allText 
                        textByLine = allText.split(/,/);
                        //console.log(allText);                  
                    }
                }
            }
            rawFile.send(null);

        }

        // Contains all the county names for print by county drop down
        readTextFile("./Counties.txt");

        //var options = '';
        var options;

        for(var i = 0; i < textByLine.length; i++){
          //options += '<option value="'+textByLine[i]+'"/>';
           options += '<option value="'+ textByLine[i] +'"></option>';       
          //console.log(textByLine[i]);
          //<option value="Travis">Travis</option>
        };

        document.getElementById('countyList').innerHTML = options;
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>

</body>

</html>